(window.webpackJsonpfront=window.webpackJsonpfront||[]).push([[0],{122:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(22),c=a.n(l),s=a(47),o=a.n(s),u=a(68),i=a(20),m=a(69),d=a.n(m),E=(a(113),a(143)),p=a(146),f=a(32),g=a(124),b=a(145),h=a(54),O=function(e){return r.a.createElement(f.a,{gridArea:"restaurantRating",align:"end"},r.a.createElement("p",null,e.rating," \u2605"))},j=a(133),v=a(134),y=a(135),w=function(e){return r.a.createElement(f.a,{gridArea:"restaurantContact",align:"end"},r.a.createElement(f.a,{direction:"row"},r.a.createElement(j.a,null),e.contact.email),r.a.createElement(f.a,{direction:"row"},r.a.createElement(v.a,null),e.contact.phone),r.a.createElement(f.a,{direction:"row"},r.a.createElement(y.a,null),e.contact.site))},A=function(e){return r.a.createElement(f.a,{gridArea:"restaurantAddress"},e.data.street,r.a.createElement("br",null),e.data.city,",\xa0",e.data.state)},T=function(e){return r.a.createElement(p.a,{background:"neutral-1",rows:["xsmall","small"],columns:["xsmall","small"],gap:"large",areas:[{name:"restaurantName",start:[0,0],end:[1,0]},{name:"restaurantRating",start:[1,0],end:[2,0]},{name:"restaurantAddress",start:[0,1],end:[1,1]},{name:"restaurantContact",start:[1,1],end:[2,1]}]},r.a.createElement(f.a,{gridArea:"restaurantName"},r.a.createElement(g.a,null,e.data.name)),r.a.createElement(A,{data:e.data.address}),r.a.createElement(O,{rating:e.data.rating}),r.a.createElement(w,{contact:e.data.contact}))},x=function(e){return r.a.createElement(f.a,{pad:"medium",background:"brand"},r.a.createElement(g.a,{size:"small"},"Average rating: ",e.data))},D=function(e){return r.a.createElement(f.a,{pad:"medium",background:"brand"},r.a.createElement(g.a,{size:"small"},"Sigma: ",e.sigma))},R=function(e){return r.a.createElement(f.a,{pad:"medium",background:"brand"},r.a.createElement(g.a,{size:"small"},"Total restaurants in radius: ",e.total))},S=a(144),k=a(138),U=a(136),P=a(137),I=Object(n.createContext)({lat:19.3117664,lng:-98.716323,radius:0,restaurants:[],aux:[],filtered:!1}),_=function(e){var t=Object(n.useContext)(I),a=t.state,l=t.dispatch,c=function(e,t,a){return e.sort((function(e,n){var r=e[t],l=n[t];return a?r<l?-1:r>l?1:0:r>l?-1:r<l?1:0}))},s=function(){for(var e=0,t=a.restaurants.length,n=a.restaurants.length-1;n>=0;n--)e+=a.restaurants[n].rating;return e/t},o=Object(n.useState)(!0),u=Object(i.a)(o,2),m=u[0],d=u[1],E=Object(n.useState)(!0),p=Object(i.a)(E,2),g=p[0],b=p[1];return r.a.createElement(f.a,{direction:"column",gap:"medium"},r.a.createElement(f.a,{direction:"row",gap:"large",pad:"medium",justify:"center"},r.a.createElement(f.a,null,r.a.createElement(S.a,{label:"A-Z",icon:m?r.a.createElement(U.a,null):r.a.createElement(P.a,null),onClick:function(){var e=c(Object(h.a)(a.restaurants),"name",m);d(!m),l({type:"UPDATE_RESTAURANTS",payload:e})}})),r.a.createElement(f.a,null,r.a.createElement(S.a,{label:"Rating",icon:g?r.a.createElement(U.a,null):r.a.createElement(P.a,null),onClick:function(){var e=c(Object(h.a)(a.restaurants),"rating",g);b(!g),l({type:"UPDATE_RESTAURANTS",payload:e})}}))),r.a.createElement(f.a,{direction:"column"},r.a.createElement(R,{total:a.restaurants.length}),r.a.createElement(x,{data:s()}),r.a.createElement(D,{sigma:function(){for(var e=0,t=a.restaurants.length,n=a.restaurants.length-1;n>=0;n--)e+=Math.pow(parseFloat(a.restaurants[n].rating)-parseFloat(s()),2);return Math.sqrt(e/(t-1)).toFixed(3)}()})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(f.a,{overflow:"auto",pad:"small",direction:"column"},r.a.createElement(k.a,{items:a.restaurants},(function(e,t){return r.a.createElement(T,{data:e,key:e.id})}))))},M=a(31),C=(a(121),a(139)),N=a(140),F={position:"absolute",top:0,left:0,margin:"1em"},L={latitude:19.4320281,longitude:-99.1336334,zoom:15},z=function(){var e=Object(n.useContext)(I),t=e.state,a=e.dispatch,l=Object(n.useState)(L),c=Object(i.a)(l,2),s=c[0],o=c[1];return r.a.createElement(f.a,{pad:"small",fill:!0},r.a.createElement(M.c,Object.assign({onClick:function(e){var t=e.lngLat;if(e.leftButton){var n=Object(i.a)(t,2),r=n[0],l=n[1];a({type:"UPDATE_LONGITUDE",payload:r}),a({type:"UPDATE_LATITUDE",payload:l})}},width:"100vw",height:"100vh",mapStyle:"mapbox://styles/mapbox/streets-v9"},s,{mapboxApiAccessToken:"pk.eyJ1IjoidnphbGJlcnRvIiwiYSI6ImNrMjllZzNjdTFtZXMzZXRjaHJ6Z2NlNW4ifQ.0DS64cOS3tH51tPaajudew",onViewportChange:function(e){return o(e)}}),r.a.createElement("div",{style:F},r.a.createElement(M.b,{onViewportChange:function(e){return o(e)}})),r.a.createElement(M.a,{latitude:t.lat,longitude:t.lng},r.a.createElement(C.a,null)),t.restaurants[0]&&t.restaurants.map((function(e){return r.a.createElement(M.a,{latitude:e.address.location.lat,longitude:e.address.location.lng,offsetLeft:-20,offsetTop:-10},r.a.createElement(N.a,null))}))))},B=(a(141),a(142)),J=function(){var e=Object(n.useContext)(I).state,t=Object(n.useContext)(I).dispatch;return r.a.createElement(f.a,{direction:"row"},r.a.createElement(f.a,{basis:"small"},r.a.createElement(g.a,null,r.a.createElement("b",null,"latitude:")," ",e.lat)),r.a.createElement(f.a,{basis:"small"},r.a.createElement(g.a,null,r.a.createElement("b",null,"latitude: "),e.lng)),r.a.createElement(f.a,{basis:"small"},r.a.createElement(B.a,{placeholder:!e.filtered&&"(radius in meters)",onChange:function(e){t({type:"UPDATE_RADIUS",payload:e.target.value})}})),r.a.createElement(S.a,{label:"Filter",onClick:function(){return t({type:"FILTER_BY_RADIUS"})}}),r.a.createElement(f.a,{align:"center"},e.filtered&&r.a.createElement(b.a,{label:"remove filter [x]",onClick:function(){return t({type:"REMOVE_FILTER"})}})||r.a.createElement("p",null,"Drop a pin and set radius")))},V=a(87);function Z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function G(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Z(a,!0).forEach((function(t){Object(V.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Z(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function q(e,t){var a=W(t.lat-e.lat),n=W(t.lng-e.lng),r=W(e.lat),l=W(t.lat),c=Math.sin(a/2)*Math.sin(a/2)+Math.sin(n/2)*Math.sin(n/2)*Math.cos(r)*Math.cos(l),s=6371e3*(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)));return console.log(s),s}function W(e){return e*Math.PI/180}function Y(e,t){var a=t.type,n=t.payload;switch(a){case"UPDATE_RESTAURANTS":return G({},e,{restaurants:n});case"UPDATE_LATITUDE":return G({},e,{lat:n});case"UPDATE_LONGITUDE":return G({},e,{lng:n});case"UPDATE_RADIUS":return G({},e,{radius:parseFloat(n)});case"REMOVE_FILTER":return G({},e,{radius:0,filtered:!1,restaurants:e.aux,aux:[]});case"FILTER_BY_RADIUS":return e.filtered?G({},e,{restaurants:e.aux.filter((function(t){return q(t.address.location,{lat:e.lat,lng:e.lng})<=e.radius}))}):G({},e,{filtered:!0,aux:e.restaurants,restaurants:e.restaurants.filter((function(t){return q(t.address.location,{lat:e.lat,lng:e.lng})<=e.radius}))});default:return e}}var H=function(){var e=Object(n.useContext)(I),t=Object(n.useReducer)(Y,e),a=Object(i.a)(t,2),l=a[0],c=a[1],s=Object(n.useState)(0),m=Object(i.a)(s,2),h=(m[0],m[1],Object(n.useState)(0)),O=Object(i.a)(h,2),j=(O[0],O[1],function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d()(v+y);case 2:t=e.sent,c({type:"UPDATE_RESTAURANTS",payload:t.data});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),v="https://cors-anywhere.herokuapp.com/",y="https://recruiting-datasets.s3.us-east-2.amazonaws.com/data_melp.json";Object(n.useEffect)((function(){j()}),[]);return r.a.createElement(I.Provider,{value:{state:l,dispatch:c}},r.a.createElement(E.a,{full:!0,theme:{global:{font:{family:"Inconsolata",size:"14px",height:"20px"}}}},r.a.createElement(p.a,{rows:["xxsmall","large"],columns:["1/3","2/3"],gap:"small",areas:[{name:"header",start:[0,0],end:[1,0]},{name:"nav",start:[0,1],end:[0,1]},{name:"main",start:[1,1],end:[1,1]}]},r.a.createElement(f.a,{gridArea:"header",background:"brand"},r.a.createElement(g.a,null,"Melp"),r.a.createElement(b.a,{href:"https://github.com/vzalberto/melp",primary:!0,label:"View on Github",target:"_blank"})),r.a.createElement(f.a,{gridArea:"nav"},r.a.createElement(_,null)),r.a.createElement(f.a,{gridArea:"main",background:"light-2"},r.a.createElement(J,null),r.a.createElement(z,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(H,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},91:function(e,t,a){e.exports=a(122)}},[[91,1,2]]]);
//# sourceMappingURL=main.a17695e4.chunk.js.map