(window.webpackJsonpfront=window.webpackJsonpfront||[]).push([[0],{122:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(22),l=a.n(c),o=a(46),i=a.n(o),u=a(67),s=a(18),m=a(68),d=a.n(m),g=(a(113),a(141)),p=a(142),E=a(31),f=a(124),b=a(144),h=a(54),O=function(e){return r.a.createElement(E.a,{gridArea:"restaurantRating",align:"end"},r.a.createElement("p",null,e.rating," \u2605"))},j=a(133),v=a(134),w=a(135),y=function(e){return r.a.createElement(E.a,{gridArea:"restaurantContact",align:"end"},r.a.createElement(E.a,{direction:"row"},r.a.createElement(j.a,null),e.contact.email),r.a.createElement(E.a,{direction:"row"},r.a.createElement(v.a,null),e.contact.phone),r.a.createElement(E.a,{direction:"row"},r.a.createElement(w.a,null),e.contact.site))},A=function(e){return r.a.createElement(E.a,{gridArea:"restaurantAddress"},e.data.street,r.a.createElement("br",null),e.data.city,",\xa0",e.data.state)},D=function(e){return r.a.createElement(p.a,{background:"neutral-1",rows:["xsmall","small"],border:"all",columns:["xsmall","small"],gap:"small",areas:[{name:"restaurantName",start:[0,0],end:[1,0]},{name:"restaurantRating",start:[1,0],end:[2,0]},{name:"restaurantAddress",start:[0,1],end:[1,1]},{name:"restaurantContact",start:[1,1],end:[2,1]}]},r.a.createElement(E.a,{gridArea:"restaurantName"},r.a.createElement(f.a,null,e.data.name)),r.a.createElement(A,{data:e.data.address}),r.a.createElement(O,{rating:e.data.rating}),r.a.createElement(y,{contact:e.data.contact}))},k=a(143),T=a(138),x=a(136),P=a(137),S=function(e){var t=function(e,t,a){return e.sort((function(e,n){var r=e[t],c=n[t];return a?r<c?-1:r>c?1:0:r>c?-1:r<c?1:0}))},a=Object(n.useState)(e.restaurants),c=Object(s.a)(a,2),l=c[0],o=c[1],i=Object(n.useState)(!0),u=Object(s.a)(i,2),m=u[0],d=u[1],g=Object(n.useState)(!0),p=Object(s.a)(g,2),f=p[0],b=p[1];return Object(n.useEffect)((function(){o(e.restaurants)}),[e]),Object(n.useEffect)((function(){console.log("hello from useEffect"),console.log(l)}),[l]),r.a.createElement(E.a,{direction:"column",gap:"xlarge"},r.a.createElement(E.a,{direction:"row",gap:"medium",pad:"large",justifiy:"center"},r.a.createElement(E.a,null,r.a.createElement(k.a,{label:"A-Z",icon:m?r.a.createElement(x.a,null):r.a.createElement(P.a,null),onClick:function(){var a=t(Object(h.a)(e.restaurants),"name",m);d(!m),o(a)}})),r.a.createElement(E.a,null,r.a.createElement(k.a,{label:"Rating",icon:f?r.a.createElement(x.a,null):r.a.createElement(P.a,null),onClick:function(){var a=t(Object(h.a)(e.restaurants),"rating",f);b(!f),o(a)}}))),r.a.createElement(E.a,{overflow:"auto",pad:"small",direction:"column"},r.a.createElement(T.a,{items:l},(function(e,t){return r.a.createElement(D,{data:e,key:e.id})}))))},U=a(52),C=(a(121),Object(n.createContext)({lat:19.4183786,lng:-99.189842,radius:7e3})),I={position:"absolute",top:0,left:0,margin:"1em"},M={latitude:37.7,longitude:-122.45,zoom:13},_=function(){var e=Object(n.useContext)(C),t=(e.state,e.dispatch),a=Object(n.useState)(M),c=Object(s.a)(a,2),l=c[0],o=c[1];return r.a.createElement(E.a,{pad:"small",fill:!0},r.a.createElement(U.b,Object.assign({onClick:function(e){var a=e.lngLat;if(e.leftButton){var n=Object(s.a)(a,2),r=n[0],c=n[1];t({type:"UPDATE_LONGITUDE",payload:r}),t({type:"UPDATE_LATITUDE",payload:c})}},width:"100vw",height:"100vh",mapStyle:"mapbox://styles/mapbox/satellite-v9"},l,{mapboxApiAccessToken:"pk.eyJ1IjoidnphbGJlcnRvIiwiYSI6ImNrMjllZzNjdTFtZXMzZXRjaHJ6Z2NlNW4ifQ.0DS64cOS3tH51tPaajudew",onViewportChange:function(e){return o(e)}}),r.a.createElement("div",{style:I},r.a.createElement(U.a,{onViewportChange:function(e){return o(e)}}))))},z=(a(139),function(e){return r.a.createElement(E.a,{pad:"medium",background:"brand"},r.a.createElement(f.a,{size:"large"},"Average rating: ",e.data))}),N=function(e){return r.a.createElement(E.a,{pad:"medium",background:"brand"},r.a.createElement(f.a,{size:"large"},"Sigma: ",e.sigma))},R=function(e){return r.a.createElement(E.a,{pad:"medium",background:"brand"},r.a.createElement(f.a,{size:"large"},"Total restaurants in radius: ",e.total))},L=a(140),G=function(){var e=Object(n.useContext)(C).state,t=Object(n.useContext)(C).dispatch;return r.a.createElement("div",null,r.a.createElement(L.a,{placeholder:"latitude: ".concat(e.lat),onChange:function(e){t({type:"UPDATE_LATITUDE",payload:e.target.value})}}),r.a.createElement(L.a,{placeholder:"latitude: ".concat(e.lng),onChange:function(e){t({type:"UPDATE_LONGITUDE",payload:e.target.value})}}),r.a.createElement(L.a,{placeholder:"radius: ".concat(e.radius),onChange:function(e){t({type:"UPDATE_RADIUS",payload:e.target.value})}}))},J=a(86);function Z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function F(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Z(a,!0).forEach((function(t){Object(J.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Z(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function q(e,t){var a=t.type,n=t.payload;switch(a){case"UPDATE_LATITUDE":return F({},e,{lat:n});case"UPDATE_LONGITUDE":return F({},e,{lng:n});case"UPDATE_RADIUS":return F({},e,{radius:n});default:return e}}function B(e,t){var a=V(t.lat-e.lat),n=V(t.lng-e.lng),r=V(e.lat),c=V(t.lat),l=Math.sin(a/2)*Math.sin(a/2)+Math.sin(n/2)*Math.sin(n/2)*Math.cos(r)*Math.cos(c);return 6371e3*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))}function V(e){return e*Math.PI/180}var W=function(){var e=Object(n.useContext)(C),t=Object(n.useReducer)(q,e),a=Object(s.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)([]),m=Object(s.a)(o,2),h=m[0],O=m[1],j=Object(n.useState)(0),v=Object(s.a)(j,2),w=v[0],y=v[1],A=Object(n.useState)(0),D=Object(s.a)(A,2),k=D[0],T=D[1],x="https://cors-anywhere.herokuapp.com/",P="https://recruiting-datasets.s3.us-east-2.amazonaws.com/data_melp.json";function U(){return(U=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d()(x+P);case 2:t=e.sent,O(t.data.filter((function(e){return B(e.address.location,{lat:c.lat,lng:c.lng})<=c.radius})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(n.useEffect)((function(){!function(){U.apply(this,arguments)}()}),[]),Object(n.useEffect)((function(){for(var e=0,t=h.length,a=h.length-1;a>=0;a--)e+=h[a].rating;y(e/t)}),[h]),Object(n.useEffect)((function(){for(var e=0,t=h.length,a=h.length-1;a>=0;a--)e+=Math.pow(parseFloat(h[a].rating)-parseFloat(w),2);console.log(e),T(Math.sqrt(e/(t-1)).toFixed(3))}),[w]);return r.a.createElement(C.Provider,{value:{state:c,dispatch:l}},r.a.createElement(g.a,{full:!0,theme:{global:{font:{family:"Inconsolata",size:"14px",height:"20px"}}}},r.a.createElement(p.a,{rows:["xxsmall","large"],columns:["1/3","2/3"],gap:"small",areas:[{name:"header",start:[0,0],end:[1,0]},{name:"nav",start:[0,1],end:[0,1]},{name:"main",start:[1,1],end:[1,1]}]},r.a.createElement(E.a,{gridArea:"header",background:"brand"},r.a.createElement(f.a,null,"Melp"),r.a.createElement(b.a,{href:"https://github.com/vzalberto/melp",primary:!0,label:"View on Github",target:"_blank"})),r.a.createElement(E.a,{gridArea:"nav"},r.a.createElement(S,{restaurants:h})),r.a.createElement(E.a,{gridArea:"main",background:"light-2"},r.a.createElement(G,null),r.a.createElement(R,{total:h.length}),r.a.createElement(z,{data:w}),r.a.createElement(N,{sigma:k}),r.a.createElement(_,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},91:function(e,t,a){e.exports=a(122)}},[[91,1,2]]]);
//# sourceMappingURL=main.4f3cfedd.chunk.js.map